<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!--/*  Microphone Check Modal - shown when no microphone is detected  */-->
<div th:fragment="microphoneModal" id="microphone-modal" class="fixed inset-0 z-[100] hidden">

	<!--/*  Backdrop  */-->
	<div class="absolute inset-0 bg-black/90 backdrop-blur-sm"></div>

	<!--/*  Modal Content  */-->
	<div class="relative z-10 flex items-center justify-center min-h-screen p-4">
		<div class="bg-slate-800 rounded-2xl shadow-2xl border border-orange-500/50 max-w-md w-full p-6 relative">

			<!--/*  Language Switcher (top right)  */-->
			<div class="absolute top-4 right-4 z-10">
				<th:block th:replace="~{layouts/fragments/language-switcher-modal :: modalLanguageSwitcher}" />
			</div>

			<!--/*  Icon  */-->
			<div class="w-16 h-16 mx-auto rounded-full bg-orange-500/20 flex items-center justify-center mb-4">
				<i class="fa-solid fa-microphone-slash text-3xl text-orange-400"></i>
			</div>

			<!--/*  Title  */-->
			<h2 class="text-xl font-bold text-white text-center mb-2" th:text="#{microphone.check.title}">Microphone Required</h2>

			<!--/*  Message  */-->
			<p class="text-slate-400 text-center mb-6" th:text="#{microphone.check.message}">
				This app needs a microphone to conduct voice interviews. Please connect a microphone to continue.
			</p>

			<!--/*  Instructions  */-->
			<div class="bg-slate-900/50 rounded-xl p-4 mb-6">
				<h3 class="text-white font-semibold mb-3 flex items-center gap-2">
					<i class="fa-solid fa-list-check text-blue-400"></i>
					<span th:text="#{microphone.check.instructions}">What to do:</span>
				</h3>
				<div class="space-y-2 text-sm">
					<div class="flex items-start gap-3">
						<span class="w-5 h-5 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold flex-shrink-0 mt-0.5">1</span>
						<span class="text-slate-300" th:text="#{microphone.check.step1}">Connect a microphone or headset to your device</span>
					</div>
					<div class="flex items-start gap-3">
						<span class="w-5 h-5 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold flex-shrink-0 mt-0.5">2</span>
						<span class="text-slate-300" th:text="#{microphone.check.step2}">Make sure it's properly plugged in</span>
					</div>
					<div class="flex items-start gap-3">
						<span class="w-5 h-5 rounded-full bg-green-500 text-white text-xs flex items-center justify-center font-bold flex-shrink-0 mt-0.5">3</span>
						<span class="text-green-300" th:text="#{microphone.check.step3}">Click "Try Again" below</span>
					</div>
				</div>
			</div>

			<!--/*  Help text  */-->
			<p class="text-center text-slate-500 text-xs mb-4" th:text="#{microphone.check.help}">
				Need help? Check your device settings to ensure a microphone is connected.
			</p>

			<!--/*  Permission Denied Warning (conditionally shown)  */-->
			<div id="mic-permission-note" class="hidden mb-4 p-4 bg-orange-900/30 border border-orange-500/50 rounded-xl">
				<p class="text-orange-300 text-sm text-center" th:text="#{microphone.check.permission.denied}">
					⚠️ Microphone permission was denied. Click the lock icon in your browser's address bar and allow microphone access, then try again.
				</p>
			</div>

			<!--/*  Retry Button  */-->
			<button type="button" onclick="retryMicrophoneCheck()"
					class="w-full px-6 py-3 bg-orange-600 hover:bg-orange-500 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-orange-500/25">
				<i class="fa-solid fa-rotate-right"></i>
				<span th:text="#{microphone.check.retry}">Try Again</span>
			</button>
		</div>
	</div>
</div>

</html>
